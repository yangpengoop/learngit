<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>菜单管理 - bjyadmin</title>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link href="/Public/statics/aceadmin/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="/Public/statics/aceadmin/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="/Public/statics/font-awesome-4.4.0/css/font-awesome.min.css"/>
    <!--[if IE 7]>
    <link rel="stylesheet" href="/Public/statics/aceadmin/css/font-awesome-ie7.min.css"/><![endif]-->
    <link rel="stylesheet" href="/Public/statics/aceadmin/css/ace.min.css"/>
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/Public/statics/aceadmin/css/ace-ie.min.css"/><![endif]--><!--[if lt IE 9]>
    <script src="/Public/statics/aceadmin/js/html5shiv.js"></script>
    <script src="/Public/statics/aceadmin/js/respond.min.js"></script><![endif]-->
    <link rel="stylesheet" href="/tpl/Public/css/base.css"/>
    <style type="text/css">
        #sidebar .nav-list {
            overflow-y: auto;
        }

        .b-nav-li {
            padding: 5px 0;
        }
    </style>
</head>
<body>
<div class="navbar navbar-default" id="navbar">
    <script type="text/javascript">
        try {
            ace.settings.check('navbar', 'fixed')
        } catch (e) {
        }
    </script>
    <div class="navbar-container" id="navbar-container">
        <div class="navbar-header pull-left"><a href="#" class="navbar-brand">
            <small><i class="icon-leaf"></i> bjyadmin管理后台</small>
        </a></div>
        <div class="navbar-header pull-right" role="navigation">
            <ul class="nav ace-nav">
                <li class="light-blue"><a data-toggle="dropdown" href="#" class="dropdown-toggle"><img
                        class="nav-user-photo" src="/Public/statics/aceadmin/avatars/user.jpg" alt="Jason's Photo"/>
                    <span class="user-info"><small>欢迎光临,</small> admin</span><i class="icon-caret-down"></i></a>
                    <ul class="user-menu pull-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
                        <li class="divider"></li>
                        <li><a href="/index.php/Home/Index/logout"><i class="icon-off"></i> 退出</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div>
<div class="main-container" id="main-container">
    <script type="text/javascript">
        try {
            ace.settings.check('main-container', 'fixed')
        } catch (e) {
        }
    </script>
    <div class="main-container-inner"><a class="menu-toggler" id="menu-toggler" href="#"><span class="menu-text"></span></a>
        <div class="sidebar" id="sidebar">
            <script type="text/javascript">
                try {
                    ace.settings.check('sidebar', 'fixed')
                } catch (e) {
                }
            </script>
            <div class="sidebar-shortcuts" id="sidebar-shortcuts">
                <div class="sidebar-shortcuts-large" id="sidebar-shortcuts-large">
                    <button class="btn btn-success"><i class="icon-signal"></i></button>
                    <button class="btn btn-info"><i class="icon-pencil"></i></button>
                    <button class="btn btn-warning"><i class="icon-group"></i></button>
                    <button class="btn btn-danger"><i class="icon-cogs"></i></button>
                </div>
                <div class="sidebar-shortcuts-mini" id="sidebar-shortcuts-mini"><span
                        class="btn btn-success"></span><span class="btn btn-info"></span><span
                        class="btn btn-warning"></span><span class="btn btn-danger"></span></div>
            </div><!-- #sidebar-shortcuts -->
            <ul class="nav nav-list">
                <li class="b-has-child"><a href="#" class="dropdown-toggle b-nav-parent"><i
                        class="fa fa-cog icon-test"></i> <span class="menu-text">系统设置</span><b
                        class="arrow icon-angle-down"></b></a>
                    <ul class="submenu">
                        <li class="b-nav-li active"><a href="/index.php/Admin/Nav/index"><i
                                class="icon-double-angle-right"></i> 菜单管理</a></li>
                    </ul>
                </li>
                <li class="b-has-child"><a href="#" class="dropdown-toggle b-nav-parent"><i
                        class="fa fa-expeditedssl icon-test"></i> <span class="menu-text">权限控制</span><b
                        class="arrow icon-angle-down"></b></a>
                    <ul class="submenu">
                        <li class="b-nav-li "><a href="/index.php/Admin/Rule/index"><i
                                class="icon-double-angle-right"></i> 权限管理</a></li>
                        <li class="b-nav-li "><a href="/index.php/Admin/Rule/group"><i
                                class="icon-double-angle-right"></i> 用户组管理</a></li>
                        <li class="b-nav-li "><a href="/index.php/Admin/Rule/admin_user_list"><i
                                class="icon-double-angle-right"></i> 管理员列表</a></li>
                    </ul>
                </li>
                <li class="b-has-child"><a href="#" class="dropdown-toggle b-nav-parent"><i
                        class="fa fa-th icon-test"></i> <span class="menu-text">文章管理</span><b
                        class="arrow icon-angle-down"></b></a>
                    <ul class="submenu">
                        <li class="b-nav-li "><a href="/index.php/Admin/Posts/index"><i
                                class="icon-double-angle-right"></i> 文章列表</a></li>
                    </ul>
                </li>
            </ul>
            <div class="sidebar-collapse" id="sidebar-collapse"><i class="icon-double-angle-left"
                                                                   data-icon1="icon-double-angle-left"
                                                                   data-icon2="icon-double-angle-right"></i></div>
            <script type="text/javascript">
                try {
                    ace.settings.check('sidebar', 'collapsed')
                } catch (e) {
                }
            </script>
        </div>
        <div class="main-content">
            <div class="page-content">
                <div class="page-header"><h1><i class="fa fa-home"></i> 首页 &gt;菜单管理</h1></div>
                <div class="col-xs-12">
                    <div class="tabbable">
                        <ul class="nav nav-tabs padding-12 tab-color-blue background-blue" id="myTab">
                            <li class="active"><a href="#home" data-toggle="tab">菜单列表</a></li>
                            <li><a href="javascript:;" onclick="add()">添加菜单</a></li>
                        </ul>
                        <div class="tab-content">
                            <form class="" action="/index.php/Admin/Nav/order" method="post">
                                <table class="table table-striped table-bordered table-hover table-condensed">
                                    <tr>
                                        <th width="5%">排序</th>
                                        <th>菜单名</th>
                                        <th>连接</th>
                                        <th>操作</th>
                                    </tr>
                                    <tr>
                                        <td><input class="input-medium" style="width:40px;height:25px;" type="text"
                                                   name="1" value="1"></td>
                                        <td>系统设置</td>
                                        <td>Admin/ShowNav/config</td>
                                        <td><a href="javascript:;" navId="1" navName="系统设置" onclick="add_child(this)">添加子菜单</a>
                                            | <a href="javascript:;" navId="1" navName="系统设置"
                                                 navMca="Admin/ShowNav/config" navIco="cog" onclick="edit(this)">修改</a>
                                            |
                                            <a href="javascript:if(confirm('确定删除？'))location='/index.php/Admin/Nav/delete/id/1'">删除</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input class="input-medium" style="width:40px;height:25px;" type="text"
                                                   name="2" value=""></td>
                                        <td>&emsp;└─ 菜单管理</td>
                                        <td>Admin/Nav/index</td>
                                        <td><a href="javascript:;" navId="2" navName="菜单管理" onclick="add_child(this)">添加子菜单</a>
                                            | <a href="javascript:;" navId="2" navName="菜单管理" navMca="Admin/Nav/index"
                                                 navIco="" onclick="edit(this)">修改</a> | <a
                                                    href="javascript:if(confirm('确定删除？'))location='/index.php/Admin/Nav/delete/id/2'">删除</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input class="input-medium" style="width:40px;height:25px;" type="text"
                                                   name="4" value="2"></td>
                                        <td>权限控制</td>
                                        <td>Admin/ShowNav/rule</td>
                                        <td><a href="javascript:;" navId="4" navName="权限控制" onclick="add_child(this)">添加子菜单</a>
                                            | <a href="javascript:;" navId="4" navName="权限控制"
                                                 navMca="Admin/ShowNav/rule" navIco="expeditedssl" onclick="edit(this)">修改</a>
                                            |
                                            <a href="javascript:if(confirm('确定删除？'))location='/index.php/Admin/Nav/delete/id/4'">删除</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input class="input-medium" style="width:40px;height:25px;" type="text"
                                                   name="7" value="1"></td>
                                        <td>&emsp;├─ 权限管理</td>
                                        <td>Admin/Rule/index</td>
                                        <td><a href="javascript:;" navId="7" navName="权限管理" onclick="add_child(this)">添加子菜单</a>
                                            | <a href="javascript:;" navId="7" navName="权限管理" navMca="Admin/Rule/index"
                                                 navIco="" onclick="edit(this)">修改</a> | <a
                                                    href="javascript:if(confirm('确定删除？'))location='/index.php/Admin/Nav/delete/id/7'">删除</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input class="input-medium" style="width:40px;height:25px;" type="text"
                                                   name="8" value="2"></td>
                                        <td>&emsp;├─ 用户组管理</td>
                                        <td>Admin/Rule/group</td>
                                        <td><a href="javascript:;" navId="8" navName="用户组管理" onclick="add_child(this)">添加子菜单</a>
                                            | <a href="javascript:;" navId="8" navName="用户组管理" navMca="Admin/Rule/group"
                                                 navIco="" onclick="edit(this)">修改</a> | <a
                                                    href="javascript:if(confirm('确定删除？'))location='/index.php/Admin/Nav/delete/id/8'">删除</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input class="input-medium" style="width:40px;height:25px;" type="text"
                                                   name="9" value="3"></td>
                                        <td>&emsp;└─ 管理员列表</td>
                                        <td>Admin/Rule/admin_user_list</td>
                                        <td><a href="javascript:;" navId="9" navName="管理员列表" onclick="add_child(this)">添加子菜单</a>
                                            | <a href="javascript:;" navId="9" navName="管理员列表"
                                                 navMca="Admin/Rule/admin_user_list" navIco=""
                                                 onclick="edit(this)">修改</a> | <a
                                                    href="javascript:if(confirm('确定删除？'))location='/index.php/Admin/Nav/delete/id/9'">删除</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input class="input-medium" style="width:40px;height:25px;" type="text"
                                                   name="16" value="4"></td>
                                        <td>会员管理</td>
                                        <td>Admin/ShowNav/</td>
                                        <td><a href="javascript:;" navId="16" navName="会员管理" onclick="add_child(this)">添加子菜单</a>
                                            | <a href="javascript:;" navId="16" navName="会员管理" navMca="Admin/ShowNav/"
                                                 navIco="users" onclick="edit(this)">修改</a> | <a
                                                    href="javascript:if(confirm('确定删除？'))location='/index.php/Admin/Nav/delete/id/16'">删除</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input class="input-medium" style="width:40px;height:25px;" type="text"
                                                   name="17" value=""></td>
                                        <td>&emsp;└─ 会员列表</td>
                                        <td>Admin/User/index</td>
                                        <td><a href="javascript:;" navId="17" navName="会员列表" onclick="add_child(this)">添加子菜单</a>
                                            | <a href="javascript:;" navId="17" navName="会员列表" navMca="Admin/User/index"
                                                 navIco="" onclick="edit(this)">修改</a> | <a
                                                    href="javascript:if(confirm('确定删除？'))location='/index.php/Admin/Nav/delete/id/17'">删除</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input class="input-medium" style="width:40px;height:25px;" type="text"
                                                   name="36" value="6"></td>
                                        <td>文章管理</td>
                                        <td>Admin/ShowNav/posts</td>
                                        <td><a href="javascript:;" navId="36" navName="文章管理" onclick="add_child(this)">添加子菜单</a>
                                            | <a href="javascript:;" navId="36" navName="文章管理"
                                                 navMca="Admin/ShowNav/posts" navIco="th" onclick="edit(this)">修改</a> |
                                            <a href="javascript:if(confirm('确定删除？'))location='/index.php/Admin/Nav/delete/id/36'">删除</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input class="input-medium" style="width:40px;height:25px;" type="text"
                                                   name="37" value=""></td>
                                        <td>&emsp;└─ 文章列表</td>
                                        <td>Admin/Posts/index</td>
                                        <td><a href="javascript:;" navId="37" navName="文章列表" onclick="add_child(this)">添加子菜单</a>
                                            | <a href="javascript:;" navId="37" navName="文章列表"
                                                 navMca="Admin/Posts/index" navIco="" onclick="edit(this)">修改</a> | <a
                                                    href="javascript:if(confirm('确定删除？'))location='/index.php/Admin/Nav/delete/id/37'">删除</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th><input class="btn btn-success" type="submit" value="排序"></th>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </table>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="bjy-add" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> &times;
                                </button>
                                <h4 class="modal-title" id="myModalLabel"> 添加菜单</h4></div>
                            <div class="modal-body">
                                <form id="bjy-form" class="form-inline" action="/index.php/Admin/Nav/add" method="post">
                                    <input type="hidden" name="pid" value="0">
                                    <table class="table table-striped table-bordered table-hover table-condensed">
                                        <tr>
                                            <th width="12%">菜单名：</th>
                                            <td><input class="input-medium" type="text" name="name"></td>
                                        </tr>
                                        <tr>
                                            <th>连接：</th>
                                            <td><input class="input-medium" type="text" name="mca"> 输入模块/控制器/方法即可 例如
                                                Admin/Nav/index
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>图标：</th>
                                            <td><input class="input-medium" type="text" name="ico"> font-awesome图标 输入fa
                                                fa- 后边的即可
                                            </td>
                                        </tr>
                                        <tr>
                                            <th></th>
                                            <td><input class="btn btn-success" type="submit" value="添加"></td>
                                        </tr>
                                    </table>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="bjy-edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"> &times;
                                </button>
                                <h4 class="modal-title" id="myModalLabel"> 修改菜单</h4></div>
                            <div class="modal-body">
                                <form id="bjy-form" class="form-inline" action="/index.php/Admin/Nav/edit"
                                      method="post"><input type="hidden" name="id">
                                    <table class="table table-striped table-bordered table-hover table-condensed">
                                        <tr>
                                            <th width="12%">菜单名：</th>
                                            <td><input class="input-medium" type="text" name="name"></td>
                                        </tr>
                                        <tr>
                                            <th>连接：</th>
                                            <td><input class="input-medium" type="text" name="mca"> 输入模块/控制器/方法即可 例如
                                                Admin/Nav/index
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>图标：</th>
                                            <td><input class="input-medium" type="text" name="ico"> font-awesome图标 输入fa
                                                fa- 后边的即可
                                            </td>
                                        </tr>
                                        <tr>
                                            <th></th>
                                            <td><input class="btn btn-success" type="submit" value="修改"></td>
                                        </tr>
                                    </table>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse"><i
            class="icon-double-angle-up icon-only bigger-110"></i></a></div><!--[if !IE]> -->
<script src="/Public/statics/js/jquery-1.10.2.min.js"></script><!-- <![endif]--><!--[if IE]>
<script src="/Public/statics/js/jquery-1.10.2.min.js"></script><![endif]--><!--[if !IE]> -->
<script type="text/javascript">
    window.jQuery || document.write("<script src='/Public/statics/aceadmin/js/jquery-2.0.3.min.js'>" + "<" + "script>");
</script><!-- <![endif]--><!--[if IE]>
<script type="text/javascript">
    window.jQuery || document.write("<script src='/Public/statics/aceadmin/js/jquery-1.10.2.min.js'>" + "<" + "script>");
</script><![endif]-->
<script type="text/javascript">
    if ("ontouchend" in document) document.write("<script src='/Public/statics/aceadmin/js/jquery.mobile.custom.min.js'>" + "<" + "script>");
</script>
<script src="/Public/statics/aceadmin/js/typeahead-bs2.min.js"></script>
<script src="/Public/statics/aceadmin/js/bootstrap.min.js"></script>
<!--[if lte IE 8]>
<script src="/Public/statics/aceadmin/js/excanvas.min.js"></script><![endif]-->
<script src="/Public/statics/aceadmin/js/jquery-ui-1.10.3.custom.min.js"></script>
<script src="/Public/statics/aceadmin/js/jquery.ui.touch-punch.min.js"></script>
<script src="/Public/statics/aceadmin/js/jquery.slimscroll.min.js"></script>
<script src="/Public/statics/aceadmin/js/jquery.easy-pie-chart.min.js"></script>
<script src="/Public/statics/aceadmin/js/jquery.sparkline.min.js"></script>
<script src="/Public/statics/aceadmin/js/flot/jquery.flot.min.js"></script>
<script src="/Public/statics/aceadmin/js/flot/jquery.flot.pie.min.js"></script>
<script src="/Public/statics/aceadmin/js/flot/jquery.flot.resize.min.js"></script>
<script src="/Public/statics/aceadmin/js/ace-elements.min.js"></script>
<script src="/Public/statics/aceadmin/js/ace.min.js"></script>
<script src="/tpl/Public/js/base.js"></script>
<script>
    // 添加菜单
    function add() {
        $("input[name='name'],input[name='mca']").val('');
        $("input[name='pid']").val(0);
        $('#bjy-add').modal('show');
    }

    // 添加子菜单
    function add_child(obj) {
        var navId = $(obj).attr('navId');
        $("input[name='pid']").val(navId);
        $("input[name='name']").val('');
        $("input[name='mca']").val('');
        $("input[name='ico']").val('');
        $('#bjy-add').modal('show');
    }

    // 修改菜单
    function edit(obj) {
        var navId = $(obj).attr('navId');
        var navName = $(obj).attr('navName');
        var navMca = $(obj).attr('navMca');
        var navIco = $(obj).attr('navIco');
        $("input[name='id']").val(navId);
        $("input[name='name']").val(navName);
        $("input[name='mca']").val(navMca);
        $("input[name='ico']").val(navIco);
        $('#bjy-edit').modal('show');
    }
</script>
<script>
    $(function () {
        $('.b-has-child .active').parents('.b-has-child').eq(0).find('.b-nav-parent').click();
    })
</script>
</body>
</html>